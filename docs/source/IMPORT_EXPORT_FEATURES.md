# çŸ¥è¯†å›¾è°±å¯¼å…¥å¯¼å‡ºåŠŸèƒ½æ€»è§ˆ

## åŠŸèƒ½æ¦‚è¿°

agraph ç°å·²æ”¯æŒå®Œæ•´çš„çŸ¥è¯†å›¾è°±å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œæä¾› JSON å’Œ GraphML ä¸¤ç§æ ¼å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. JSON æ ¼å¼æ”¯æŒ

- âœ… **å®Œæ•´æ•°æ®ä¿ç•™**: æ‰€æœ‰å®ä½“ã€å…³ç³»ã€é›†ç¾¤ã€æ–‡æœ¬å—ã€å…ƒæ•°æ®
- âœ… **æ–‡ä»¶å¯¼å…¥å¯¼å‡º**: `export_to_json()` / `import_from_json()`
- âœ… **å­—ç¬¦ä¸²å¯¼å…¥å¯¼å‡º**: `export_to_json_string()` / `import_from_json_string()`
- âœ… **è‡ªåŠ¨ç›®å½•åˆ›å»º**: å¯¼å‡ºæ—¶è‡ªåŠ¨åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
- âœ… **UTF-8 ç¼–ç **: å®Œæ•´æ”¯æŒä¸­æ–‡ç­‰å¤šè¯­è¨€å­—ç¬¦
- âœ… **æ ¼å¼åŒ–é€‰é¡¹**: å¯å®šåˆ¶ç¼©è¿›ã€æ’åºç­‰ JSON æ ¼å¼é€‰é¡¹

### 2. GraphML æ ¼å¼æ”¯æŒ

- âœ… **æ ‡å‡†å…¼å®¹**: ç¬¦åˆ W3C GraphML æ ‡å‡†
- âœ… **æ–‡ä»¶å¯¼å…¥å¯¼å‡º**: `export_to_graphml()` / `import_from_graphml()`
- âœ… **å±æ€§æ˜ å°„**: æ™ºèƒ½å¤„ç†å¤æ‚å±æ€§çš„åºåˆ—åŒ–
- âœ… **æƒé‡å¤„ç†**: å…³ç³»æƒé‡å­˜å‚¨åœ¨ properties ä¸­
- âœ… **ç±»å‹å®¹é”™**: æ— æ•ˆç±»å‹æ—¶è‡ªåŠ¨å›é€€åˆ°é»˜è®¤å€¼
- âœ… **å·¥å…·å…¼å®¹**: æ”¯æŒ Gephiã€Cytoscapeã€NetworkXã€igraph

### 3. é”™è¯¯å¤„ç†ä¸éªŒè¯

- âœ… **æ–‡ä»¶æ£€æŸ¥**: è‡ªåŠ¨æ£€æŸ¥æ–‡ä»¶å­˜åœ¨æ€§
- âœ… **æ•°æ®éªŒè¯**: å¯¼å…¥åè‡ªåŠ¨éªŒè¯æ•°æ®å®Œæ•´æ€§
- âœ… **å¼‚å¸¸å¤„ç†**: å®Œæ•´çš„é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… **å®¹é”™è§£æ**: å±æ€§è§£æå¤±è´¥æ—¶çš„ä¼˜é›…é™çº§

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ImportExportMixin åŸºç±»

```python
class ImportExportMixin(ABC):
    # JSON æ ¼å¼æ”¯æŒ
    def export_to_json(self, file_path, **kwargs)
    def import_from_json(cls, file_path, **kwargs)
    def export_to_json_string(self, **kwargs)
    def import_from_json_string(cls, json_string, **kwargs)

    # GraphML æ ¼å¼æ¥å£ï¼ˆå­ç±»å®ç°ï¼‰
    def export_to_graphml(self, file_path, **kwargs)
    def import_from_graphml(cls, file_path, **kwargs)

    # æ‰©å±•æ¥å£
    def _export_data(self) -> Dict[str, Any]
    def _import_data(cls, data, **kwargs)
```

### KnowledgeGraph é›†æˆ

- ç»§æ‰¿ `ImportExportMixin`ï¼Œè‡ªåŠ¨è·å¾—æ‰€æœ‰å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- å®ç° GraphML çš„å…·ä½“å¯¼å…¥å¯¼å‡ºé€»è¾‘
- åˆ©ç”¨ç°æœ‰çš„ `to_dict()` å’Œ `from_dict()` æ–¹æ³•

## ğŸ“Š æ ¼å¼æ¯”è¾ƒ

| ç‰¹æ€§ | JSON | GraphML |
|------|------|---------|
| **æ•°æ®å®Œæ•´æ€§** | 100% | ~80% (æ— é›†ç¾¤ã€æ–‡æœ¬å—) |
| **æ–‡ä»¶å¤§å°** | ä¸­ç­‰ | è¾ƒå¤§ (XML æ ¼å¼) |
| **è§£æé€Ÿåº¦** | å¿« | ä¸­ç­‰ |
| **å·¥å…·æ”¯æŒ** | agraph åŸç”Ÿ | å¹¿æ³›çš„å›¾å½¢å·¥å…· |
| **å¯è¯»æ€§** | å¥½ | å¥½ (XML ç»“æ„) |
| **æ ‡å‡†åŒ–** | JSON æ ‡å‡† | W3C GraphML æ ‡å‡† |

## ğŸ”§ æŠ€æœ¯å®ç°

### JSON å®ç°è¦ç‚¹

- ä½¿ç”¨ Python æ ‡å‡† `json` åº“
- æ”¯æŒè‡ªå®šä¹‰åºåˆ—åŒ–é€‰é¡¹ (`indent`, `ensure_ascii`, `sort_keys`)
- åˆ©ç”¨ç°æœ‰çš„ `SerializableMixin` æ¥å£
- è‡ªåŠ¨å¤„ç†æ—¶é—´æˆ³çš„ ISO æ ¼å¼è½¬æ¢

### GraphML å®ç°è¦ç‚¹

- é›†æˆ NetworkX åº“è¿›è¡Œ GraphML å¤„ç†
- MultiDiGraph æ”¯æŒå¤šé‡å…³ç³»
- å±æ€§åºåˆ—åŒ–ï¼šå¤æ‚å¯¹è±¡ â†’ å­—ç¬¦ä¸² â†’ `ast.literal_eval()` ååºåˆ—åŒ–
- å›¾çº§å…ƒæ•°æ®å­˜å‚¨åœ¨ NetworkX å›¾å±æ€§ä¸­
- æ™ºèƒ½ç±»å‹å¤„ç†å’Œé”™è¯¯æ¢å¤

### ä¾èµ–ç®¡ç†

- æ–°å¢ä¾èµ–ï¼š`networkx>=3.2`
- å‘åå…¼å®¹ï¼šä¸å½±å“ç°æœ‰åŠŸèƒ½
- å¯é€‰ä¾èµ–ï¼šGraphML åŠŸèƒ½ä»…åœ¨éœ€è¦æ—¶ä½¿ç”¨

## ğŸ§ª æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•åœºæ™¯

- âœ… åŸºæœ¬å¯¼å…¥å¯¼å‡ºåŠŸèƒ½
- âœ… å¤æ‚æ•°æ®ç»“æ„å¤„ç†
- âœ… é”™è¯¯æƒ…å†µå¤„ç†
- âœ… æ–‡ä»¶ä¸å­˜åœ¨å¤„ç†
- âœ… æ— æ•ˆæ•°æ®æ ¼å¼å¤„ç†
- âœ… å¤§å‹å›¾è°±å¤„ç†
- âœ… ä¸­æ–‡å­—ç¬¦æ”¯æŒ

### é›†æˆæµ‹è¯•åœºæ™¯

- âœ… å®Œæ•´å·¥ä½œæµæµ‹è¯•
- âœ… æ ¼å¼é—´è½¬æ¢æµ‹è¯•
- âœ… å±æ€§ä¿ç•™éªŒè¯
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•

## ğŸ“š æ–‡æ¡£ä½“ç³»

### ç”¨æˆ·æ–‡æ¡£

1. **[å¿«é€Ÿå¼€å§‹](quick_start_import_export.md)** - 5åˆ†é’Ÿä¸Šæ‰‹æŒ‡å—
2. **[å®Œæ•´æ•™ç¨‹](import_export_tutorial.md)** - è¯¦ç»†åŠŸèƒ½ä»‹ç»å’Œä½¿ç”¨æ–¹æ³•
3. **[GraphML é›†æˆ](graphml_integration_guide.md)** - å›¾å½¢å·¥å…·é›†æˆæŒ‡å—
4. **[åŠŸèƒ½æ¦‚è§ˆ](README_import_export.md)** - åŠŸèƒ½æ€»è§ˆå’Œç´¢å¼•

### æŠ€æœ¯æ–‡æ¡£

- API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- æ•…éšœæ’é™¤æŒ‡å—

## ğŸ”— å·¥å…·é›†æˆ

### å›¾å½¢å¯è§†åŒ–å·¥å…·

- **Gephi**: äº¤äº’å¼ç½‘ç»œå¯è§†åŒ–
- **Cytoscape**: ç”Ÿç‰©ä¿¡æ¯å­¦ç½‘ç»œåˆ†æ
- **NodeXL**: Excel ä¸­çš„ç½‘ç»œåˆ†æ

### ç¼–ç¨‹åº“é›†æˆ

- **NetworkX**: Python ç½‘ç»œåˆ†æåº“
- **igraph**: R/Python å›¾å½¢åˆ†æåº“
- **graph-tool**: é«˜æ€§èƒ½å›¾å½¢åº“

### æ•°æ®åˆ†æå¹³å°

- **Jupyter Notebook**: äº¤äº’å¼æ•°æ®åˆ†æ
- **R Studio**: ç»Ÿè®¡åˆ†æç¯å¢ƒ
- **MATLAB**: ç§‘å­¦è®¡ç®—å¹³å°

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```python
# åˆ›å»ºå’Œå¯¼å‡º
kg = KnowledgeGraph(name="ç¤ºä¾‹")
kg.export_to_json("graph.json")
kg.export_to_graphml("graph.graphml")

# å¯¼å…¥å’Œä½¿ç”¨
kg1 = KnowledgeGraph.import_from_json("graph.json")
kg2 = KnowledgeGraph.import_from_graphml("graph.graphml")
```

### é«˜çº§ç”¨æ³•

```python
# æ‰¹é‡å¤„ç†
for i, kg in enumerate(graphs):
    kg.export_to_json(f"output/graph_{i:03d}.json")

# æ¡ä»¶å¯¼å‡º
filtered_kg = export_filtered_graph(
    kg, "filtered.json",
    entity_types=[EntityType.PERSON],
    min_confidence=0.8
)

# å·¥å…·é›†æˆ
import networkx as nx
with tempfile.NamedTemporaryFile(suffix='.graphml') as tmp:
    kg.export_to_graphml(tmp.name)
    G = nx.read_graphml(tmp.name)
    centrality = nx.degree_centrality(G)
```

## âš¡ æ€§èƒ½ç‰¹å¾

### å¤„ç†èƒ½åŠ›

- **å°å‹å›¾è°±** (< 1K èŠ‚ç‚¹): æ¯«ç§’çº§å¤„ç†
- **ä¸­å‹å›¾è°±** (1K-10K èŠ‚ç‚¹): ç§’çº§å¤„ç†
- **å¤§å‹å›¾è°±** (10K+ èŠ‚ç‚¹): æä¾›æµå¼å¤„ç†é€‰é¡¹

### å†…å­˜ä½¿ç”¨

- JSON: å†…å­˜å‹å¥½ï¼Œæ”¯æŒæµå¼å¤„ç†
- GraphML: NetworkX ç¼“å­˜ï¼Œé€‚ä¸­å†…å­˜ä½¿ç”¨
- å¤§å‹å›¾è°±: æä¾›æ•°æ®ç®€åŒ–é€‰é¡¹

## ğŸ¯ åº”ç”¨åœºæ™¯

### æ•°æ®å¤‡ä»½ä¸è¿ç§»

```python
# å®šæœŸå¤‡ä»½
kg.export_to_json(f"backup_{datetime.now().strftime('%Y%m%d')}.json")

# ç³»ç»Ÿè¿ç§»
old_kg = KnowledgeGraph.import_from_json("legacy_system.json")
new_system.import_graph(old_kg)
```

### ç§‘å­¦ç ”ç©¶

```python
# å¯¼å‡ºä¾› R åˆ†æ
kg.export_to_graphml("research_data.graphml")
# åœ¨ R ä¸­: library(igraph); g <- read_graph("research_data.graphml")
```

### æ•°æ®å¯è§†åŒ–

```python
# Gephi å¯è§†åŒ–å·¥ä½œæµ
kg.export_to_graphml("network_viz.graphml")
# 1. åœ¨ Gephi ä¸­æ‰“å¼€æ–‡ä»¶
# 2. åº”ç”¨å¸ƒå±€ç®—æ³•
# 3. è®¾ç½®è§†è§‰å±æ€§
# 4. å¯¼å‡ºé«˜è´¨é‡å›¾åƒ
```

## ğŸ”® æœªæ¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡

- [ ] æ”¯æŒæ›´å¤š GraphML å±æ€§ç±»å‹
- [ ] æ·»åŠ  GraphSON æ ¼å¼æ”¯æŒ
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œå†…å­˜ä½¿ç”¨æ”¹è¿›

### é•¿æœŸç›®æ ‡

- [ ] æ”¯æŒ RDF/Turtle æ ¼å¼
- [ ] é›†æˆæ›´å¤šå›¾å½¢åˆ†æå·¥å…·
- [ ] äº‘ç«¯å›¾è°±å­˜å‚¨æ”¯æŒ

## ğŸ“ˆ è´¨é‡ä¿è¯

### ä»£ç è´¨é‡

- âœ… 100% ç±»å‹æ³¨è§£è¦†ç›–
- âœ… Flake8 ä»£ç è§„èŒƒæ£€æŸ¥
- âœ… MyPy é™æ€ç±»å‹æ£€æŸ¥
- âœ… Black ä»£ç æ ¼å¼åŒ–
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†

### æµ‹è¯•è´¨é‡

- âœ… å•å…ƒæµ‹è¯•è¦†ç›–
- âœ… é›†æˆæµ‹è¯•éªŒè¯
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ ¼å¼é€‰æ‹©**
   - æ•°æ®å¤‡ä»½å’Œç³»ç»Ÿé›†æˆï¼šä½¿ç”¨ JSON
   - å›¾å½¢åˆ†æå’Œå¯è§†åŒ–ï¼šä½¿ç”¨ GraphML

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¤§å‹å›¾è°±è€ƒè™‘æ•°æ®åˆ†ç‰‡
   - ä½¿ç”¨æµå¼å¤„ç†å‡å°‘å†…å­˜å ç”¨
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

3. **é”™è¯¯å¤„ç†**
   - å§‹ç»ˆåŒ…å« try-catch å—
   - éªŒè¯å¯¼å…¥åçš„æ•°æ®å®Œæ•´æ€§
   - æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯

4. **æ•°æ®ç®¡ç†**
   - å®šæœŸå¤‡ä»½é‡è¦å›¾è°±æ•°æ®
   - ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç®¡ç†å›¾è°±å˜æ›´
   - å»ºç«‹æ•°æ®éªŒè¯æµç¨‹

---

**æ€»ç»“**: agraph çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ä¸ºçŸ¥è¯†å›¾è°±çš„æ•°æ®äº¤æ¢æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼Œé›†æˆä¸»æµå·¥å…·ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
